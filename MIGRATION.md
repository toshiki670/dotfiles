# バージョン移行マッピング

このドキュメントは、dotfilesプロジェクトの旧バージョン体系から新しいセマンティックバージョニング 0.x.x への完全な移行マッピングを記録します。

## 移行の背景

このプロジェクトは複数のバージョニング体系を経て進化してきました：

1. **Phase 1 (初期SemVer期)**: 適切なセマンティックバージョニング（1.0.0 → 2.3.0）
2. **Phase 2 (単純バージョン期)**: パッチバージョンを省略（3.0 → 9.0）
3. **Phase 3 (vプレフィックス期)**: vプレフィックス付き（v10.0 → v18.0）

これらを統一された 0.x.x 形式に移行することで、一貫性のあるバージョン管理を実現します。

## 完全な対応表

### Phase 1: 初期SemVer期（1.x.x, 2.x.x）

これらのバージョンは正式リリース前の開発期であったため、0.1.x および 0.2.x にマッピングします。

| 旧タグ   | 新タグ  | リリース日 | 備考 |
|---------|--------|-----------|------|
| 1.0.0   | 0.1.0  | -         | 初期リリース |
| 1.1.0   | 0.1.1  | -         | |
| 1.1.1   | 0.1.2  | -         | |
| 1.2.0   | 0.1.3  | -         | |
| 1.2.1   | 0.1.4  | -         | |
| 1.2.2   | 0.1.5  | -         | |
| 1.2.3   | 0.1.6  | -         | |
| 1.3.0   | 0.1.7  | -         | |
| 1.4.0   | 0.1.8  | -         | |
| 1.5.0   | 0.1.9  | -         | |
| 1.5.1   | 0.1.10 | -         | |
| 1.5.2   | 0.1.11 | -         | |
| 1.6.0   | 0.1.12 | -         | |
| 1.6.1   | 0.1.13 | -         | |
| 1.6.2   | 0.1.14 | -         | |
| 1.6.3   | 0.1.15 | -         | |
| 1.6.4   | 0.1.16 | -         | |
| 1.6.5   | 0.1.17 | -         | |
| 1.6.6   | 0.1.18 | -         | |
| 1.6.7   | 0.1.19 | -         | |
| 1.7.0   | 0.1.20 | -         | |
| 1.7.1   | 0.1.21 | -         | 1.x系最終版 |

### Phase 1.5: メジャーバージョン2期（2.x.x）

| 旧タグ   | 新タグ  | リリース日 | 備考 |
|---------|--------|-----------|------|
| 2.0.0   | 0.2.0  | -         | メジャーバージョン変更 |
| 2.1.0   | 0.2.1  | -         | |
| 2.1.1   | 0.2.2  | -         | |
| 2.2.0   | 0.2.3  | -         | |
| 2.2.1   | 0.2.4  | -         | |
| 2.2.2   | 0.2.5  | -         | |
| 2.3.0   | 0.2.6  | -         | 2.x系最終版 |

### Phase 2: 単純バージョン期（x.0, x.y）

SemVerのパッチバージョンが省略された期間。

| 旧タグ | 新タグ | リリース日 | 備考 |
|-------|-------|-----------|------|
| 3.0   | 0.3.0 | -         | |
| 4.0   | 0.4.0 | -         | |
| 5.0   | 0.5.0 | -         | |
| 6.0   | 0.6.0 | -         | |
| 7.0   | 0.7.0 | -         | |
| 8.0   | 0.8.0 | -         | |
| 8.1   | 0.8.1 | -         | |
| 8.2   | 0.8.2 | -         | |
| 8.3   | 0.8.3 | -         | |
| 8.4   | 0.8.4 | -         | |
| 9.0   | 0.9.0 | -         | |

### Phase 3: vプレフィックス期（vx.y）

バージョンにvプレフィックスが付いた期間。

| 旧タグ  | 新タグ  | リリース日 | 備考 |
|--------|--------|-----------|------|
| v10.0  | 0.10.0 | -         | vプレフィックス導入 |
| v11.0  | 0.11.0 | -         | |
| v12.0  | 0.12.0 | -         | |
| v13.0  | 0.13.0 | -         | |
| v14.0  | 0.14.0 | -         | |
| v14.1  | 0.14.1 | -         | |
| v14.2  | 0.14.2 | -         | |
| v15.0  | 0.15.0 | -         | |
| v16.0  | 0.16.0 | -         | |
| v17.0  | 0.17.0 | -         | |
| v18.0  | 0.18.0 | -         | 移行直前の最新版 |

## 移行の原則

### 1. 時系列の保持

全てのバージョンは、元のリリース順序を保持しています。

### 2. コミットの保持

全ての新しいタグは、元のタグと同じGitコミットを参照します。履歴は変更されません。

### 3. リリースノートの保持

GitHubリリースに記載されていた全てのリリースノートは、新しいリリースに移行されます。

### 4. アセットの保持

リリースに添付されていたファイル（アセット）も、可能な限り新しいリリースに移行されます。

## 移行スクリプト

移行は以下のスクリプトを使用して実行されます：

```bash
# 移行の実行
./migrate-to-semver-0x.sh

# 事前確認
git tag -l | sort -V                    # 現在のタグ確認
gh release list --repo toshiki670/dotfiles  # 現在のリリース確認
```

詳細は `migrate-to-semver-0x.sh` を参照してください。

## 移行後の確認

移行が正常に完了したことを確認するには：

```bash
# タグ数の確認（52個のタグがあるはず）
git tag -l | wc -l

# タグ一覧の表示
git tag -l | sort -V

# 最新バージョンの確認（0.18.0のはず）
git tag -l | sort -V | tail -1

# GitHubリリースの確認
gh release list --repo toshiki670/dotfiles

# バージョンファイルの更新
echo '0.18.0' > version
git add version
git commit -m "chore: update version to 0.18.0 (post-migration)"
git push
```

## ロールバック

万が一、移行に問題があった場合のロールバック手順：

```bash
# バックアップから復元（事前にバックアップを取っておく）
# タグのバックアップ
git tag -l > tags_backup_YYYYMMDD.txt

# リリースのバックアップ
gh release list --repo toshiki670/dotfiles > releases_backup_YYYYMMDD.txt
```

ロールバックが必要な場合は、GitHubサポートに連絡するか、バックアップから手動で復元してください。

## 参考情報

- [VERSIONING.md](./VERSIONING.md) - バージョニングルールの詳細
- [Semantic Versioning 2.0.0](https://semver.org/)
- [GitHub Releases](https://docs.github.com/en/repositories/releasing-projects-on-github)

## 移行完了日

- 移行日: TBD
- 移行者: TBD
- 移行スクリプトバージョン: 1.0.0

