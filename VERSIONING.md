# バージョニングルール

このドキュメントでは、dotfiles プロジェクトのバージョニングルールを定義します。

## セマンティックバージョニング 0.x.x

このプロジェクトは[セマンティックバージョニング 2.0.0](https://semver.org/)に従い、**0.x.x 形式**でバージョン管理を行います。

### バージョン形式

```
0.MINOR.PATCH
```

- **MAJOR**: 0（開発初期段階・正式リリース前を示す）
- **MINOR**: 破壊的変更を含む機能追加・変更
- **PATCH**: バグ修正や小さな改善

### 0.x.x の意味

[SemVer仕様](https://semver.org/#spec-item-4)によると：

> Major version zero (0.y.z) is for initial development. Anything MAY change at any time. The public API SHOULD NOT be considered stable.

メジャーバージョン0は：
- 初期開発段階を示す
- いつでも何でも変更可能
- パブリックAPI（設定ファイルの構造など）は安定していないと見なされる
- **破壊的変更を MINOR バージョンで導入できる**

## バージョンアップのルール

### MINOR バージョンアップ（0.x.0 → 0.(x+1).0）

以下のような変更で MINOR バージョンを上げる：

- 設定ファイルの構造変更
- プラグインマネージャーの変更（例：zinit → sheldon）
- エイリアスやコマンドの破壊的変更
- ディレクトリ構造の変更
- 新しいツールへの依存関係追加
- 大きな機能追加や改善

**例：**
```bash
# sheldon から別のプラグインマネージャーに移行
0.18.0 → 0.19.0

# zsh設定の大幅なリファクタリング
0.19.0 → 0.20.0
```

### PATCH バージョンアップ（0.x.y → 0.x.(y+1)）

以下のような変更で PATCH バージョンを上げる：

- バグ修正
- タイポ修正
- 既存設定の微調整
- ドキュメントの更新
- 小さな改善や最適化
- コメントの追加

**例：**
```bash
# エイリアスのバグ修正
0.18.0 → 0.18.1

# READMEの更新
0.18.1 → 0.18.2

# パスの調整
0.18.2 → 0.18.3
```

## リリースプロセス

### 1. バージョンの更新

```bash
# MINOR バージョンアップ
./bump-version.sh minor

# PATCH バージョンアップ
./bump-version.sh patch
```

### 2. リリースの作成

```bash
# 統合スクリプト（推奨）
./release.sh minor  # または patch
# → リリースノートを入力してCtrl+D

# 段階的に実行する場合
git add version
git commit -m "chore: bump version to 0.x.y"
./create-release.sh
```

### 3. ドラフトリリース

テストや確認が必要な場合：

```bash
./release.sh minor --draft
# → 後でGitHubでPublish
```

## タグの命名規則

- **形式**: `0.x.y`（プレフィックスなし）
- **例**: `0.18.0`, `0.18.1`, `0.19.0`
- ❌ 使用しない: `v0.18.0`, `version-0.18.0`

## 将来の1.0.0リリース

このプロジェクトが以下の条件を満たした時、1.0.0をリリースすることを検討します：

- 設定ファイルの構造が安定している
- ドキュメントが十分に整備されている
- インストールプロセスが確立している
- 複数のプラットフォームで安定動作している
- コミュニティからのフィードバックが安定している

**1.0.0以降のバージョニング：**
- MAJOR（x.0.0）: 破壊的変更
- MINOR（0.x.0）: 後方互換性のある機能追加
- PATCH（0.0.x）: 後方互換性のあるバグ修正

## バージョン履歴の移行

### 移行前のバージョン体系

このプロジェクトは過去に以下のバージョン体系を使用していました：

1. **初期SemVer期**: `1.0.0` → `2.3.0`（2018-2021）
2. **単純バージョン期**: `3.0` → `9.0`（2021）
3. **vプレフィックス期**: `v10.0` → `v18.0`（2021-2024）

### 移行方針

全52個のバージョンを時系列順に0.x.x形式に変換：

- **MINOR**: 時系列順に連番（0.1.0 → 0.28.0）
- **PATCH**: 元のPATCH番号を保持
- **最終結果**: `v18.0` → `0.28.0`

### 移行例

| 旧バージョン | 新バージョン | 理由 |
|------------|------------|------|
| 1.0.0      | 0.1.0      | 最初のバージョン |
| 1.1.0      | 0.2.0      | 次のMINOR |
| 1.1.1      | 0.2.1      | PATCH保持 |
| 8.0        | 0.18.0     | MINORは連番 |
| 8.4        | 0.18.4     | PATCH保持 |
| v18.0      | 0.28.0     | 最新（28番目のMINOR） |

完全な対応表は[MIGRATION.md](./MIGRATION.md)を参照してください。

## 参考リンク

- [Semantic Versioning 2.0.0](https://semver.org/)
- [Semantic Versioning 2.0.0（日本語）](https://semver.org/lang/ja/)
- [GitHub Releases Documentation](https://docs.github.com/en/repositories/releasing-projects-on-github)

## 関連ファイル

- `version` - 現在のバージョンを記録するファイル
- `bump-version.sh` - バージョンを更新するスクリプト
- `create-release.sh` - GitタグとGitHubリリースを作成するスクリプト
- `release.sh` - バージョン更新からリリース作成までの統合スクリプト
- `MIGRATION.md` - 旧バージョンから新バージョンへの完全な移行マッピング

